<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Arc Upload â€” Elegant File Uploader</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* -------------------------
     Design tokens (Apple-esque)
     ------------------------- */
  :root{
    --bg: #f5f6f7;
    --bg-gradient: radial-gradient(1200px 800px at 80% -10%, #ffffff 0%, #f3f4f6 45%, #eef0f4 100%);
    --card: #ffffff;
    --text: #0a0a0a;
    --muted: #6b7280;
    --primary: #0a84ff;
    --primary-ink: #ffffff;
    --border: #e5e7eb;
    --ring: rgba(10,132,255,.3);
    --shadow-1: 0 1px 2px rgba(0,0,0,.06), 0 12px 28px rgba(0,0,0,.06);
    --shadow-2: 0 2px 10px rgba(0,0,0,.08), 0 20px 40px rgba(0,0,0,.10);
    --glass: rgba(255,255,255,.7);
    --glass-border: rgba(0,0,0,.06);
    --drop-bg: linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.55));
    --success: #34c759;
    --danger: #ff3b30;
    --warning: #ffcc00;
    --progress: #0a84ff;
    --progress-bg: #e6f0ff;
    --chip: #eef2ff;
    --chip-text: #1f2937;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg: #0b0c0f;
      --bg-gradient: radial-gradient(1200px 800px at 80% -10%, #0e1116 0%, #0b0c0f 60%, #0b0c0f 100%);
      --card: #0f1218;
      --text: #f5f7fa;
      --muted: #9aa3af;
      --primary: #0a84ff;
      --primary-ink: #ffffff;
      --border: #1f2430;
      --ring: rgba(10,132,255,.4);
      --shadow-1: 0 1px 2px rgba(0,0,0,.6), 0 12px 28px rgba(0,0,0,.55);
      --shadow-2: 0 2px 10px rgba(0,0,0,.55), 0 20px 40px rgba(0,0,0,.6);
      --glass: rgba(16,19,26,.7);
      --glass-border: rgba(255,255,255,.06);
      --drop-bg: linear-gradient(180deg, rgba(18,22,30,.6), rgba(18,22,30,.5));
      --success: #30d158;
      --danger: #ff453a;
      --warning: #ffd60a;
      --progress: #0a84ff;
      --progress-bg: #0f213f;
      --chip: #101826;
      --chip-text: #e5e7eb;
    }
  }

  /* Reset-ish */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Text","Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    color:var(--text);
    background: var(--bg);
    background-image: var(--bg-gradient);
    -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
  }
  a{color:inherit;text-decoration:none}
  button{font:inherit}
  .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

  /* Layout */
  .shell{
    min-height:100dvh;
    display:grid;
    grid-template-rows: auto 1fr auto;
  }
  header{
    position:sticky; top:0; z-index:40;
    backdrop-filter: saturate(180%) blur(14px);
    background: var(--glass);
    border-bottom:1px solid var(--glass-border);
  }
  .nav{
    max-width:1200px; margin:0 auto; padding:14px 20px;
    display:flex; align-items:center; gap:16px; justify-content:space-between;
  }
  .brand{
    display:flex; gap:12px; align-items:center; font-weight:600; letter-spacing:.2px;
  }
  .logo{
    width:28px; height:28px; border-radius:8px;
    background: linear-gradient(135deg, #0a84ff 0%, #64d2ff 100%);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.25), var(--shadow-1);
    display:grid; place-items:center;
  }
  .logo svg{width:18px;height:18px;filter:drop-shadow(0 1px 0 rgba(0,0,0,.2))}
  .nav-actions{display:flex; align-items:center; gap:10px}
  .btn{
    border:1px solid var(--border);
    background: var(--card);
    color:var(--text);
    padding:10px 14px; border-radius:12px;
    display:inline-flex; align-items:center; gap:10px;
    box-shadow: var(--shadow-1);
    transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    cursor:pointer;
  }
  .btn:hover{transform:translateY(-1px); box-shadow: var(--shadow-2)}
  .btn.primary{
    background: linear-gradient(180deg, #0a84ff, #0077ee);
    color:var(--primary-ink);
    border-color: transparent;
  }
  .btn.ghost{
    background: transparent; border-color: var(--border);
  }
  .theme-toggle{display:flex;align-items:center;gap:8px}
  .switch{
    --h:24px; position:relative; width:44px; height:var(--h); border-radius:999px;
    background:var(--border); border:1px solid var(--glass-border);
    box-shadow:inset 0 1px 2px rgba(0,0,0,.06);
    cursor:pointer; transition:background .25s ease;
  }
  .switch::after{
    content:""; position:absolute; top:50%; left:2px; translate:0 -50%;
    width:20px; height:20px; background:#fff; border-radius:50%;
    box-shadow:0 1px 2px rgba(0,0,0,.2), 0 4px 10px rgba(0,0,0,.15);
    transition:left .25s ease, background .25s ease;
  }
  .switch[data-on="true"]{background:rgba(10,132,255,.5)}
  .switch[data-on="true"]::after{left:calc(100% - 22px)}

  main{padding:40px 20px}
  .container{max-width:1200px; margin:0 auto; display:grid; grid-template-columns: 320px 1fr; gap:24px}
  @media (max-width:1000px){ .container{grid-template-columns:1fr} }

  /* Sidebar */
  .side{
    position:sticky; top:86px; align-self:start;
    display:flex; flex-direction:column; gap:16px;
    height: calc(100dvh - 120px);
  }
  .card{
    background: var(--card);
    border:1px solid var(--border);
    border-radius:16px;
    box-shadow: var(--shadow-1);
  }
  .panel{padding:18px}
  .panel h3{margin:0 0 12px;font-weight:700;letter-spacing:.2px}
  .hint{color:var(--muted); font-size:.9rem}

  .chip{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 10px; border-radius:999px;
    background:var(--chip); color:var(--chip-text); border:1px solid var(--border);
    font-size:.9rem;
  }

  /* Uploader */
  .work{
    display:flex; flex-direction:column; gap:18px;
  }
  .hero{
    background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.55));
    border:1px solid var(--border);
    border-radius:22px;
    padding:26px;
    box-shadow: var(--shadow-2);
    overflow:hidden; position:relative;
  }
  @media (prefers-color-scheme: dark){
    .hero{background: linear-gradient(180deg, rgba(16,19,26,.65), rgba(16,19,26,.55))}
  }
  .hero-cta{
    display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap;
  }
  .titles{display:flex; flex-direction:column; gap:6px}
  .titles h1{margin:0; font-size:1.6rem; letter-spacing:.2px}
  .titles p{margin:0; color:var(--muted)}
  .drop{
    margin-top:16px;
    display:grid; place-items:center;
    min-height:220px;
    border:1.5px dashed var(--border);
    border-radius:18px;
    background: var(--drop-bg);
    backdrop-filter: blur(10px) saturate(160%);
    transition: border-color .2s ease, box-shadow .2s ease, transform .2s ease;
  }
  .drop.dragover{
    border-color: var(--primary);
    box-shadow: 0 0 0 6px var(--ring);
    transform: scale(1.01);
  }
  .drop-inner{
    text-align:center; padding:26px; display:flex; flex-direction:column; gap:14px; align-items:center
  }
  .drop .upl-icon{
    width:54px; height:54px; border-radius:14px;
    background: linear-gradient(135deg, #0a84ff 0%, #64d2ff 100%);
    display:grid; place-items:center; color:#fff; box-shadow: var(--shadow-1);
  }
  .file-cta{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}
  .file-btn{
    border-radius:10px; padding:10px 12px; border:1px solid var(--border); background:var(--card);
    cursor:pointer; transition:transform .15s ease, box-shadow .2s ease;
    display:inline-flex; align-items:center; gap:10px; box-shadow: var(--shadow-1);
  }
  .file-btn:hover{transform:translateY(-1px); box-shadow: var(--shadow-2)}
  .file-input{display:none}

  /* List */
  .list{
    gap:10px; display:flex; flex-direction:column;
  }
  .empty{
    padding:24px; text-align:center; color:var(--muted);
  }
  .row{
    --h:64px;
    display:grid; grid-template-columns: 44px 1fr auto; align-items:center; gap:12px;
    padding:10px 14px; border-radius:14px; border:1px solid var(--border); background:var(--card);
    box-shadow: var(--shadow-1);
  }
  .icon{
    width:44px; height:44px; border-radius:12px; display:grid; place-items:center;
    background:linear-gradient(135deg, #f0f6ff, #edf4ff);
    border:1px solid var(--border);
  }
  @media (prefers-color-scheme: dark){
    .icon{background:linear-gradient(135deg, #0e1420, #0b1220)}
  }
  .meta{display:flex; flex-direction:column; gap:6px; min-width:0}
  .name{font-weight:600; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
  .sub{color:var(--muted); font-size:.9rem}
  .actions{display:flex; align-items:center; gap:8px}
  .pill{
    border:1px solid var(--border); border-radius:999px; padding:6px 10px; font-size:.85rem;
    background:var(--card);
  }
  .trash, .pause, .resume{
    display:inline-grid; place-items:center; width:36px; height:36px; border-radius:10px; border:1px solid var(--border); background:var(--card);
    cursor:pointer; transition: transform .15s ease, box-shadow .2s ease;
    box-shadow: var(--shadow-1);
  }
  .trash:hover,.pause:hover,.resume:hover{transform:translateY(-1px); box-shadow: var(--shadow-2)}
  .trash[data-variant="danger"]{border-color:rgba(255,59,48,.35)}
  .bar{
    position:relative; height:8px; border-radius:999px; background: var(--progress-bg); overflow:hidden; border:1px solid var(--border);
  }
  .bar > i{
    display:block; height:100%; width:0%;
    background: linear-gradient(90deg, var(--progress), #69b4ff);
  }
  .status{
    display:flex; align-items:center; gap:8px; color:var(--muted); font-size:.9rem
  }
  .tag{
    padding:6px 10px; border-radius:999px; font-size:.82rem; border:1px solid var(--border);
    background: linear-gradient(180deg, #ffffff, #fafbfc);
  }
  @media (prefers-color-scheme: dark){
    .tag{background: linear-gradient(180deg, #121720, #0f131b)}
  }

  /* Footer */
  footer{
    border-top:1px solid var(--glass-border);
    backdrop-filter: blur(8px);
    background: var(--glass);
  }
  .foot{max-width:1200px;margin:0 auto;padding:18px 20px;color:var(--muted);display:flex;justify-content:space-between;flex-wrap:wrap;gap:10px}

  /* Toast */
  .toast-area{position:fixed; right:14px; bottom:14px; display:flex; flex-direction:column; gap:10px; z-index:50}
  .toast{
    background: var(--card); border:1px solid var(--border); border-radius:12px; padding:12px 14px;
    box-shadow: var(--shadow-2); display:flex; align-items:center; gap:10px; min-width:220px
  }
  .toast.ok{border-color:rgba(52,199,89,.35)}
  .toast.warn{border-color:rgba(255,204,0,.35)}
  .toast.err{border-color:rgba(255,59,48,.35)}
  .toast small{color:var(--muted)}

  /* Subtle floating shapes (decoration) */
  .blob{
    position:absolute; inset:auto -80px -80px auto; width:220px; height:220px; border-radius:50%;
    background: radial-gradient(closest-side, rgba(10,132,255,.25), rgba(10,132,255,0));
    filter: blur(24px);
    pointer-events:none
  }
</style>
</head>
<body>
<div class="shell">
  <header>
    <nav class="nav" aria-label="Primary">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M5 12c0-3.866 3.582-7 8-7 1.657 0 3 1.343 3 3 0 2.761-2.686 5-6 5h-1v2h1c4.418 0 8 3.134 8 7" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </div>
        <span>Arc Upload</span>
        <span class="chip" title="Private by design">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 10V7a6 6 0 1 1 12 0v3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><rect x="4" y="10" width="16" height="10" rx="2" stroke="currentColor" stroke-width="1.6"/></svg>
          End-to-end feel (UI)
        </span>
      </div>
      <div class="nav-actions">
        <button class="btn ghost" id="clearAllBtn" title="Clear list">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 7h16M10 11v6M14 11v6M9 7l1-3h4l1 3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
          Clear
        </button>
        <button class="btn primary" id="fakeUploadAll" title="Simulate upload">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 16V4m0 0 4 4M12 4 8 8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/><rect x="4" y="16" width="16" height="4" rx="1.5" fill="currentColor" opacity=".2"/></svg>
          Upload All
        </button>
        <div class="theme-toggle" title="Toggle theme">
          <span class="visually-hidden" id="themeLabel">Theme</span>
          <div class="switch" data-on="false" role="switch" aria-labelledby="themeLabel" tabindex="0" id="themeSwitch"></div>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <div class="container">
      <!-- Sidebar -->
      <aside class="side">
        <section class="card panel">
          <h3>Upload Settings</h3>
          <div class="field">
            <label class="hint">Destination (demo)</label>
            <div class="btn" style="width:100%; justify-content:space-between;">
              <span style="display:flex;align-items:center;gap:10px">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7a2 2 0 0 1 2-2h8l4 4v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z" stroke="currentColor" stroke-width="1.4"/></svg>
                Personal Drive
              </span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/></svg>
            </div>
          </div>
          <div class="field" style="margin-top:12px">
            <label class="hint">Max file size</label>
            <div class="chip">Up to 2 GB</div>
          </div>
          <div class="field" style="margin-top:12px">
            <label class="hint">Allowed types</label>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <span class="tag">Images</span>
              <span class="tag">Videos</span>
              <span class="tag">Documents</span>
              <span class="tag">Archives</span>
            </div>
          </div>
        </section>

        <section class="card panel">
          <h3>Transfer Options</h3>
          <div style="display:flex; flex-direction:column; gap:10px">
            <label class="btn" style="justify-content:space-between">
              <span style="display:flex;gap:10px;align-items:center">
                <input type="checkbox" id="optEncrypt" checked /> Encrypt in transit
              </span>
              <span class="hint">TLS 1.3</span>
            </label>
            <label class="btn" style="justify-content:space-between">
              <span style="display:flex;gap:10px;align-items:center">
                <input type="checkbox" id="optChecksum" checked /> Integrity check
              </span>
              <span class="hint">SHA-256</span>
            </label>
            <label class="btn" style="justify-content:space-between">
              <span style="display:flex;gap:10px;align-items:center">
                <input type="checkbox" id="optAutoRetry" checked /> Auto-retry
              </span>
              <span class="hint">3 attempts</span>
            </label>
          </div>
        </section>

        <section class="card panel">
          <h3>Summary</h3>
          <div class="hint" id="summaryText">0 files selected</div>
        </section>
      </aside>

      <!-- Work area -->
      <section class="work">
        <div class="hero">
          <div class="blob" aria-hidden="true"></div>
          <div class="hero-cta">
            <div class="titles">
              <h1>Upload files with elegance</h1>
              <p>Drag & drop anywhere in the area below, or select files. Clean, fast, and delightful.</p>
            </div>
            <div class="file-cta">
              <label class="file-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 16V4m0 0 4 4M12 4 8 8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/><rect x="4" y="16" width="16" height="4" rx="1.5" fill="currentColor" opacity=".2"/></svg>
                Choose files
                <input class="file-input" id="fileInput" type="file" multiple />
              </label>
              <button class="btn" id="chooseFolder" title="(UI only)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M3 7a2 2 0 0 1 2-2h4l2 2h6a2 2 0 0 1 2 2v1H3V7z" stroke="currentColor" stroke-width="1.4"/><rect x="3" y="9" width="18" height="10" rx="2" stroke="currentColor" stroke-width="1.4"/></svg>
                Choose folder
              </button>
            </div>
          </div>

          <div id="dropzone" class="drop" role="region" aria-label="File drop area">
            <div class="drop-inner">
              <div class="upl-icon" aria-hidden="true">
                <svg width="26" height="26" viewBox="0 0 24 24" fill="none">
                  <path d="M12 16V4m0 0 4 4M12 4 8 8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                  <rect x="3" y="16" width="18" height="4" rx="2" fill="white" opacity=".3"/>
                </svg>
              </div>
              <div>
                <strong>Drop files here</strong> or click <em>Choose files</em> above.
              </div>
              <div class="hint">Weâ€™ll prepare them for upload (simulation in this demo).</div>
            </div>
          </div>
        </div>

        <section class="card panel">
          <h3>Queue</h3>
          <div id="fileList" class="list">
            <div class="empty" id="emptyState">No files yet. Add some to get started.</div>
          </div>
        </section>
      </section>
    </div>
  </main>

  <footer>
    <div class="foot">
      <span>Â© <span id="year"></span> Arc Upload. UI demo only.</span>
      <span>Designed with subtle gradients, soft shadows, and care.</span>
    </div>
  </footer>
</div>

<!-- Toasts -->
<div class="toast-area" id="toasts" aria-live="polite" aria-atomic="true"></div>

<script>
/* ========= Utilities ========= */
const $ = (s, p=document) => p.querySelector(s);
const $$ = (s, p=document) => Array.from(p.querySelectorAll(s));
const bytes = n => {
  if (n === 0) return "0 B";
  const u = ['B','KB','MB','GB','TB']; const i = Math.floor(Math.log(n)/Math.log(1024));
  return (n/Math.pow(1024,i)).toFixed(i?1:0) + ' ' + u[i];
}
const ext = name => (name.split('.').pop() || "").toLowerCase();
const iconFor = name => {
  const e = ext(name);
  if (['png','jpg','jpeg','gif','webp','heic','svg'].includes(e)) return 'image';
  if (['mp4','mov','avi','mkv','webm'].includes(e)) return 'video';
  if (['pdf'].includes(e)) return 'pdf';
  if (['zip','rar','7z','gz','tar'].includes(e)) return 'zip';
  if (['doc','docx','pages','rtf'].includes(e)) return 'doc';
  if (['xls','xlsx','numbers','csv'].includes(e)) return 'xls';
  if (['ppt','pptx','key'].includes(e)) return 'ppt';
  return 'file';
}
const toast = (msg, type='ok') => {
  const box = document.createElement('div');
  box.className = `toast ${type}`;
  box.innerHTML = `
    <div style="display:grid;place-items:center;width:18px;height:18px;border-radius:6px;border:1px solid var(--border)">
      ${type==='ok' ? 'âœ“' : type==='warn' ? '!' : 'Ã—'}
    </div>
    <div style="display:flex;flex-direction:column">
      <strong style="font-weight:600">${msg.title || 'Notice'}</strong>
      <small>${msg.body || ''}</small>
    </div>`;
  $("#toasts").appendChild(box);
  setTimeout(()=> box.remove(), 3500);
}

/* ========= State ========= */
const state = {
  files: [], // { id, file, name, size, progress, status: 'queued'|'uploading'|'paused'|'done'|'error' }
};
const summaryEl = $("#summaryText");
const listEl = $("#fileList");
const emptyEl = $("#emptyState");

/* ========= Theme Toggle ========= */
const switchEl = $("#themeSwitch");
const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
const getTheme = () => localStorage.getItem('arc-theme') || (prefersDark ? 'dark':'light');
const setTheme = t => {
  document.documentElement.style.colorScheme = t;
  switchEl.dataset.on = String(t==='dark');
  localStorage.setItem('arc-theme', t);
}
setTheme(getTheme());
switchEl.addEventListener('click', ()=> setTheme(getTheme()==='dark'?'light':'dark'));
switchEl.addEventListener('keydown', e => {
  if (e.key===' '||e.key==='Enter'){ e.preventDefault(); switchEl.click(); }
});

/* ========= File Handling (UI only) ========= */
const fileInput = $("#fileInput");
const dropzone = $("#dropzone");
const clearAllBtn = $("#clearAllBtn");
const fakeUploadAllBtn = $("#fakeUploadAll");

fileInput.addEventListener('change', e => {
  if (e.target.files?.length) addFiles([...e.target.files]);
});

["dragenter","dragover"].forEach(ev => {
  dropzone.addEventListener(ev, e => { e.preventDefault(); e.stopPropagation(); dropzone.classList.add('dragover'); });
});
["dragleave","drop"].forEach(ev => {
  dropzone.addEventListener(ev, e => { e.preventDefault(); e.stopPropagation(); dropzone.classList.remove('dragover'); });
});
dropzone.addEventListener('drop', e => {
  const dt = e.dataTransfer;
  if (dt?.files?.length) addFiles([...dt.files]);
});

function addFiles(files){
  const added = [];
  files.forEach(f=>{
    const id = crypto.randomUUID();
    state.files.push({ id, file:f, name:f.name, size:f.size, progress:0, status:'queued' });
    added.push(f.name);
  });
  render();
  if (added.length){
    toast({title:"Files added", body:`${added.length} file(s) queued.`}, 'ok');
  }
}

function removeFile(id){
  const i = state.files.findIndex(x=>x.id===id);
  if (i>-1){ state.files.splice(i,1); render(); }
}

function simulateUpload(item){
  if (item.status==='done') return;
  item.status='uploading';
  const step = () => {
    if (item.status==='paused') return;
    if (item.progress >= 100){
      item.progress = 100; item.status='done'; render();
      toast({title:`Uploaded`, body:item.name}, 'ok');
      return;
    }
    // randomised smooth increments
    item.progress += Math.min(5 + Math.random()*12, 100-item.progress);
    render();
    item._timer = setTimeout(step, 220 + Math.random()*180);
  };
  step();
}
function pauseUpload(item){
  item.status='paused';
  clearTimeout(item._timer);
  render();
}
function resumeUpload(item){
  if (item.status!=='paused') return;
  simulateUpload(item);
}

function fakeUploadAll(){
  state.files.forEach(f=>{
    if (f.status==='queued' || f.status==='paused'){ simulateUpload(f); }
  });
  if (!state.files.length){
    toast({title:"Nothing to upload", body:"Add some files first."}, 'warn');
  }
}

/* ========= Render ========= */
function render(){
  // summary
  const total = state.files.length;
  const done = state.files.filter(f=>f.status==='done').length;
  summaryEl.textContent = `${total} file${total!==1?'s':''} selected â€¢ ${done} done`;

  // list
  listEl.innerHTML = '';
  if (!state.files.length){
    listEl.appendChild(emptyEl);
    emptyEl.style.display='block';
    return;
  } else { emptyEl.style.display='none'; }

  state.files.forEach(item=>{
    const row = document.createElement('div');
    row.className = 'row';
    row.setAttribute('data-id', item.id);

    const ico = document.createElement('div');
    ico.className = 'icon';
    ico.innerHTML = svgFor(iconFor(item.name));
    row.appendChild(ico);

    const meta = document.createElement('div');
    meta.className = 'meta';
    meta.innerHTML = `
      <div class="name" title="${item.name}">${item.name}</div>
      <div class="sub">
        ${bytes(item.size)} â€¢ <span class="status">
          ${statusBadge(item.status)}
        </span>
      </div>
      <div class="bar" aria-label="Progress"><i style="width:${item.progress}%"></i></div>
    `;
    row.appendChild(meta);

    const actions = document.createElement('div');
    actions.className = 'actions';
    const pct = document.createElement('span');
    pct.className = 'pill';
    pct.textContent = `${Math.round(item.progress)}%`;
    actions.appendChild(pct);

    const pauseBtn = document.createElement('button');
    pauseBtn.className = item.status==='paused' ? 'resume' : 'pause';
    pauseBtn.title = item.status==='paused' ? 'Resume' : 'Pause';
    pauseBtn.innerHTML = item.status==='paused' ? svgFor('play') : svgFor('pause');
    pauseBtn.addEventListener('click', ()=>{
      if (item.status==='paused'){ resumeUpload(item); }
      else if (item.status==='uploading'){ pauseUpload(item); }
      else if (item.status==='queued'){ simulateUpload(item); }
    });
    actions.appendChild(pauseBtn);

    const del = document.createElement('button');
    del.className = 'trash';
    del.setAttribute('data-variant','danger');
    del.title = 'Remove from queue';
    del.innerHTML = svgFor('trash');
    del.addEventListener('click', ()=> removeFile(item.id));
    actions.appendChild(del);

    row.appendChild(actions);
    listEl.appendChild(row);
  });
}

function statusBadge(status){
  const map = {
    queued: '<span class="tag">Queued</span>',
    uploading: '<span class="tag" style="border-color: rgba(10,132,255,.35)">Uploading</span>',
    paused: '<span class="tag" style="border-color: rgba(255,204,0,.35)">Paused</span>',
    done: `<span class="tag" style="border-color: rgba(52,199,89,.35)">Done</span>`,
    error: `<span class="tag" style="border-color: rgba(255,59,48,.35)">Error</span>`
  };
  return map[status] || status;
}

/* ========= Icons ========= */
function svgFor(kind){
  const base = 'currentColor';
  const s = {
    image:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="16" rx="2.5" stroke="${base}" stroke-width="1.6"/><circle cx="9" cy="9" r="2" fill="${base}" opacity=".4"/><path d="M21 16l-5.5-5.5-6 6L5 12l-2 2" stroke="${base}" stroke-width="1.6" stroke-linecap="round"/></svg>`,
    video:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="14" height="14" rx="2.5" stroke="${base}" stroke-width="1.6"/><path d="M17 9l4-2v10l-4-2V9z" fill="${base}" opacity=".4"/><path d="M10 9.5v5l4-2.5-4-2.5z" fill="${base}"/></svg>`,
    pdf:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 3h8l5 5v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" stroke="${base}" stroke-width="1.6"/><text x="8" y="17" font-size="8" fill="${base}" font-weight="700">PDF</text></svg>`,
    zip:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="4" y="3" width="16" height="18" rx="2.5" stroke="${base}" stroke-width="1.6"/><path d="M10 5h2v2h-2V5zm0 4h2v2h-2V9zm0 4h2v2h-2v-2z" fill="${base}"/></svg>`,
    doc:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 3h8l5 5v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" stroke="${base}" stroke-width="1.6"/><path d="M8 12h8M8 15h8M8 9h5" stroke="${base}" stroke-width="1.6" stroke-linecap="round"/></svg>`,
    xls:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 3h8l5 5v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" stroke="${base}" stroke-width="1.6"/><path d="M9 9l6 6M15 9l-6 6" stroke="${base}" stroke-width="1.6" stroke-linecap="round"/></svg>`,
    ppt:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 3h8l5 5v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" stroke="${base}" stroke-width="1.6"/><circle cx="12" cy="13" r="4" stroke="${base}" stroke-width="1.6"/><path d="M12 9v4h4" stroke="${base}" stroke-width="1.6"/></svg>`,
    file:`<svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 3h8l5 5v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" stroke="${base}" stroke-width="1.6"/></svg>`,
    play:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M9 7l8 5-8 5V7z" fill="${base}"/></svg>`,
    pause:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><rect x="7" y="6" width="3" height="12" rx="1" fill="${base}"/><rect x="14" y="6" width="3" height="12" rx="1" fill="${base}"/></svg>`,
    trash:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M10 11v6M14 11v6M9 7l1-3h4l1 3" stroke="${base}" stroke-width="1.6" stroke-linecap="round"/></svg>`
  };
  return s[kind] || s.file;
}

/* ========= Controls ========= */
clearAllBtn.addEventListener('click', ()=>{
  if (!state.files.length) { toast({title:"Queue empty", body:"Nothing to clear."}, 'warn'); return; }
  state.files.forEach(f=> clearTimeout(f._timer));
  state.files = []; render();
  toast({title:"Cleared", body:"Queue is now empty."}, 'ok');
});
fakeUploadAllBtn.addEventListener('click', fakeUploadAll);
$("#chooseFolder").addEventListener('click', ()=>{
  toast({title:"Folder picker", body:"Not available in demo. Using files is supported."}, 'warn');
});

/* ========= Init ========= */
$("#year").textContent = new Date().getFullYear();
render();
</script>
</body>
</html>
